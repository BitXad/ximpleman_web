<?php

/*
 * Generated by CRUDigniter v3.2 
 * www.crudigniter.com
 */

class Subcategoria_servicio_model extends CI_Model {

    function __construct() {
        parent::__construct();
    }

    /*
     * Get subcategoria_servicio by catserv_id
     */

    function get_subcategoria_servicio($subcatserv_id) {
        return $this->db->get_where('subcategoria_servicio', array('subcatserv_id' => $subcatserv_id))->row_array();
    }

    /*
     * Get all subcategoria_servicio
     */

    function get_all_subcategoria_servicio() {
        $servicio = $this->db->query("
            SELECT
                *

            FROM
                subcategoria_servicio sc, categoria_servicio cs, estado e

            WHERE
                sc.catserv_id = cs.catserv_id
	        and cs.estado_id = e.estado_id
            ORDER BY `subcatserv_id` DESC
        ")->result_array();

        return $servicio;
    }

    /*
     * function to add new subcategoria_servicio
     */

    function add_subcategoria_servicio($params) {
        $this->db->insert('subcategoria_servicio', $params);
        return $this->db->insert_id();
    }

    /*
     * function to update subcategoria_servicio
     */

    function update_subcategoria_servicio($subcatserv_id, $params) {
        $this->db->where('subcatserv_id', $subcatserv_id);
        return $this->db->update('subcategoria_servicio', $params);
    }

    /*
     * function to delete subcategoria_servicio
     */

    function delete_subcategoria_servicio($subcatserv_id) {
        return $this->db->delete('subcategoria_servicio', array('subcatserv_id' => $subcatserv_id));
    }

    /*
     * Get all subcategoria_servicio ACTIVOS
     */

    function get_all_subcategoria_servicio_id1() {
        $categoria = $this->db->query("
            SELECT
                *

            FROM
                subcategoria_servicio cs, estado e

            WHERE
                cs.estado_id = e.estado_id
                and e.estado_id = 1

            ORDER BY `subcatserv_id` DESC
        ")->result_array();

        return $categoria;
    }

    /*
     * Get all subcategoria_servicio pertenecientes a una categoria
     */

    function get_all_subcategoria_de_categoria2($catserv_id) {

        $servicio = $this->db->query("
            SELECT
                sc.*, e.estado_color, e.estado_descripcion

            FROM
                subcategoria_servicio sc, estado e

            WHERE
		sc.estado_id = e.estado_id
		and e.estado_id = 1
                and sc.catserv_id = " . $catserv_id . "

        ")->result_array();

        return $servicio;
    }

    function get_all_subcategoria_de_categoria($catserv_id) {
        
        $this->db->select('*');
        $this->db->from('subcategoria_servicio');
        $this->db->join('estado', 'subcategoria_servicio.estado_id = estado.estado_id');
        $this->db->where(' estado.estado_id', 1);
        $this->db->where('subcategoria_servicio.catserv_id', $catserv_id);
        $query = $this->db->get();
//               $var = $this->db->last_query();
//              return $var;
        return $query->result();
    }
    
    function get_nombre_subcategoria_servicio($subcatserv_id){
        $subcatserv_descripcion = $this->db->get_where('subcategoria_servicio', array('subcatserv_id' => $subcatserv_id))->row_array();
        return $subcatserv_descripcion['subcatserv_descripcion'];
    }
    
    /*
     * Get busqueda all subcategoria_servicio ACTIVOS
     */
    function get_searchall_subcategoria_servicio_id1($parametro, $catserv_id){
        $categoria = $this->db->query("
            SELECT
                ss.subcatserv_id, ss.subcatserv_descripcion
            FROM
                subcategoria_servicio ss, estado e, categoria_servicio cs
            WHERE
                ss.estado_id = e.estado_id
                and e.estado_id = 1
                and ss.catserv_id = cs.catserv_id
                and ss.catserv_id = $catserv_id
                and (ss.subcatserv_descripcion like '%".$parametro."%')
            ORDER BY ss.subcatserv_id DESC
        ")->result_array();

        return $categoria;
    }
    /*
     * Get this subcategoria
     */
    function get_this_subcatserv($subcatserv_id){
        $categoria = $this->db->query("
            SELECT
                ss.subcatserv_id, ss.subcatserv_descripcion, ss.subcatserv_precio
            FROM
                subcategoria_servicio ss
            WHERE
                ss.subcatserv_id = $subcatserv_id
                
        ")->result_array();

        return $categoria;
    }
    
}
