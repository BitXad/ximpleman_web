<?php
/* 
 * Generated by CRUDigniter v3.2 
 * www.crudigniter.com
 */
 
class Principal extends CI_Controller{
    private $sistema;
    function __construct()
    {
        parent::__construct();
        
        $this->load->model('Sistema_model');
        $this->sistema = $this->Sistema_model->get_sistema();
    }

    function index()
    {
        $data['sistema'] = $this->sistema;
        $this->load->model('Principal_model');
        $id_pagina = 1;
        $data['menu_superior'] = $this->Principal_model->get_menu_principal($id_pagina);
        $data['items'] = $this->Principal_model->get_menu_items($id_pagina);
        
//        $data['pagina'] = $this->Menu_principal_model->get_all_pagina($id_pagina);
//        $data['menu_superior'] = $this->Menu_principal_model->get_all_menu_superior($id_pagina);
//        $data['slider_principal'] = $this->Menu_principal_model->get_all_slider_principal($id_pagina);
//        $data['articulos'] = $this->Menu_principal_model->get_all_articulos($id_pagina);
//        $data['galerias'] = $this->Menu_principal_model->get_all_galerias($id_pagina);
//        $data['galeria_imagenes'] = $this->Menu_principal_model->get_all_galeria_imagenes(1);
//        $data['ofertas'] = $this->Menu_principal_model->get_all_ofertas($id_pagina);
//        $data['redessociales'] = $this->Menu_principal_model->get_all_redes($id_pagina);
//        $data['habitaciones'] = $this->Menu_principal_model->get_all_habitacion();
//        $data['servicios'] = $this->Menu_principal_model->get_all_servicios();
//        $data['testimonios'] = $this->Menu_principal_model->get_all_testimonios();
//        $data['enlaces'] = $this->Menu_principal_model->get_all_enlaces($id_pagina);
        
        $data['titulo'] = 'Ximpleman - Sistema Integral de Ventas';
        $data['_view'] = 'dashboard';
        $this->load->view('site/index',$data);
    }
    
 
    public function sendMailGmail()
    {
        $data['sistema'] = $this->sistema;
		//cargamos la libreria email de ci
		$this->load->library("email");
 
		//configuracion para gmail
		$configGmail = array(
			'protocol' => 'smtp',
			'smtp_host' => 'ssl://smtp.gmail.com',
			'smtp_port' => 465,
			'smtp_user' => 'pedrolork@gmail.com',
			'smtp_pass' => 'javato1234',
			'mailtype' => 'html',
			'charset' => 'utf-8',
			'newline' => "\r\n"
		);    
 
		//cargamos la configuración para enviar con gmail
		$this->email->initialize($configGmail);
 
		$this->email->from('Thader Radio');
		$this->email->to("pedrolork@gmail.com");
		$this->email->subject('Bienvenido/a a Thader Radio');
		$this->email->message('<h2>Email enviado con codeigniter haciendo uso del smtp de gmail</h2><hr><br> Bienvenido al blog');
		$this->email->send();
		//con esto podemos ver el resultado
		var_dump($this->email->print_debugger());
    }
 
    public function sendMailYahoo()
    {
        $data['sistema'] = $this->sistema;
		//cargamos la libreria email de ci
		$this->load->library("email");
 
		//configuracion para yahoo
		$configYahoo = array(
			'protocol' => 'smtp',
			'smtp_host' => 'smtp.mail.yahoo.com',
			'smtp_port' => 587,
			'smtp_crypto' => 'tls',
			'smtp_user' => 'emaildeyahoo',
			'smtp_pass' => 'password',
			'mailtype' => 'html',
			'charset' => 'utf-8',
			'newline' => "\r\n"
		); 
 
		//cargamos la configuración para enviar con yahoo
		$this->email->initialize($configYahoo);
 
		$this->email->from('correo que envia los emails');//correo de yahoo o no funcionará
		$this->email->to("correo que recibe el email");
		$this->email->subject('Bienvenido/a a uno-de-piera.com');
		$this->email->message('<h2>Email enviado con codeigniter haciendo uso del smtp de yahoo</h2><hr><br> Bienvenido al blog');
		$this->email->send();
		//con esto podemos ver el resultado
		var_dump($this->email->print_debugger());
 
	}    
}
