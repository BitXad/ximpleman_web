<?php
/* 
 * Generated by CRUDigniter v3.2 
 * www.crudigniter.com
 */
class Recorrido extends CI_Controller{
    private $session_data = "";
    private $sistema;
    function __construct()
    {
        parent::__construct();
        $this->load->model('Recorrido_model');
        $this->load->model('Usuario_model');
        if ($this->session->userdata('logged_in')) {
            $this->session_data = $this->session->userdata('logged_in');
        }else {
            redirect('', 'refresh');
        }
        $this->load->model('Sistema_model');
        $this->sistema = $this->Sistema_model->get_sistema();
    }

    function index(){
        
            $data['sistema'] = $this->sistema;
            $data['tipousuario_id'] = $this->session_data['tipousuario_id'];
            $data['usuario_nombre'] = $this->session_data['usuario_nombre'];
            $data['usuario_id'] = $this->session_data['usuario_id'];
            $this->load->model('Empresa_model');
            $data['empresa'] = $this->Empresa_model->get_all_empresa();
            
            $this->load->model('Usuario_model');
            $data['all_usuario'] = $this->Usuario_model->get_all_usuario_activo();
            
            $data['pedido_titulo'] = $this->session_data['pedido_titulo'];
            $data['_view'] = 'recorrido/index';
            $this->load->view('layouts/main',$data);
    }
    
    function recorrido_dist()
    {
        
        
        $filtro = $this->input->post('filtro');
        $data = $this->Recorrido_model->recorrido_dist($filtro);
        
       
        echo json_encode($data);
              
    }


}